<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Upcoming Matches - Soccer Scanner</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            background: #0f172a;
            min-height: 100vh;
            color: #e2e8f0;
        }

        /* Navigation Header Styles */
        .app-header {
            background: #1e293b;
            color: white;
            padding: 20px 0;
            border-bottom: 1px solid #334155;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .app-title {
            font-size: 2.2em;
            font-weight: 600;
            margin: 0;
            color: #ffffff;
        }

        .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .nav-link {
            color: #cbd5e1;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 6px;
            transition: all 0.2s ease;
            font-weight: 500;
            font-size: 0.95em;
        }

        .nav-link:hover {
            background: #334155;
            color: #ffffff;
        }

        .nav-link.active {
            background: #3b82f6;
            color: #ffffff;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 32px 20px;
        }

        .page-header {
            background: #1e293b;
            padding: 24px;
            border-radius: 8px;
            border: 1px solid #334155;
            margin-bottom: 32px;
            text-align: center;
        }

        .page-header h1 {
            color: #ffffff;
            font-size: 2.2em;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .page-header p {
            color: #94a3b8;
            font-size: 1em;
        }

        .date-indicator {
            background: #3b82f6;
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            display: inline-block;
            margin-top: 12px;
            font-weight: 500;
            font-size: 0.9em;
        }

        .loading {
            text-align: center;
            padding: 48px;
            background: #1e293b;
            border-radius: 8px;
            border: 1px solid #334155;
        }

        .loading h2 {
            color: #e2e8f0;
            margin-bottom: 20px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .matches-container {
            background: #1e293b;
            border-radius: 8px;
            border: 1px solid #334155;
            overflow: hidden;
        }

        /* Featured Matches Section */
        .featured-section {
            background: #1e293b;
            padding: 24px;
            color: #e2e8f0;
            border-bottom: 1px solid #334155;
        }

        .section-header {
            text-align: center;
            margin-bottom: 24px;
        }

        .featured-header h2 {
            font-size: 1.8em;
            font-weight: 600;
            margin-bottom: 8px;
            color: #ffffff;
        }

        .featured-header p {
            font-size: 1em;
            color: #94a3b8;
        }

        .featured-note {
            text-align: center;
            font-size: 1em;
            opacity: 0.85;
            margin: 10px 0 0 0;
            font-style: italic;
            background: rgba(255,255,255,0.1);
            padding: 10px 20px;
            border-radius: 20px;
            display: inline-block;
        }

        .featured-matches-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 16px;
            margin-top: 24px;
        }

        .featured-match-card {
            background: #0f172a;
            color: #e2e8f0;
            border-radius: 6px;
            padding: 20px;
            border: 1px solid #334155;
            transition: all 0.2s ease;
            position: relative;
        }

        .featured-match-card:hover {
            border-color: #64748b;
            background: #1a202c;
        }

        .featured-match-card.priority-high {
            border-left: 3px solid #ef4444;
        }

        .featured-match-card.priority-medium {
            border-left: 3px solid #f59e0b;
        }

        .featured-match-card.priority-low {
            border-left: 3px solid #10b981;
        }

        .featured-rank {
            position: absolute;
            top: 12px;
            right: 12px;
            background: #3b82f6;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.85em;
        }

        .featured-competition {
            font-size: 0.85em;
            color: #94a3b8;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 12px;
        }

        .featured-teams {
            text-align: center;
            margin: 16px 0;
        }

        .team-name {
            font-size: 1.1em;
            font-weight: 600;
            color: #f1f5f9;
            margin: 6px 0;
        }

        .vs-text {
            font-size: 0.9em;
            color: #64748b;
            margin: 8px 0;
            font-weight: 500;
        }

        .featured-score {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            margin: 12px 0;
            font-size: 1.5em;
            font-weight: 600;
            color: #f1f5f9;
        }

        .score-separator {
            color: #64748b;
            font-size: 0.8em;
        }

        .featured-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 16px;
            padding-top: 12px;
            border-top: 1px solid #334155;
        }

        .featured-time {
            font-size: 0.95em;
            font-weight: 500;
            color: #94a3b8;
        }

        .featured-status {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            font-weight: 500;
        }

        .featured-venue {
            text-align: center;
            color: #64748b;
            font-size: 0.85em;
            margin-top: 8px;
            font-style: italic;
        }

        /* All Matches Section */
        .all-matches-section {
            background: #1e293b;
        }

        .all-matches-header {
            background: #1e293b;
            padding: 24px;
            border-bottom: 1px solid #334155;
        }

        .all-matches-header h2 {
            color: #ffffff;
            font-size: 1.6em;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .all-matches-header p {
            color: #94a3b8;
            font-size: 1em;
        }

        .competition-section {
            margin-bottom: 0;
            border-bottom: 1px solid #334155;
        }

        .competition-section:last-child {
            border-bottom: none;
        }

        .competition-header {
            background: #374151;
            color: #e2e8f0;
            padding: 16px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 12px;
        }

        .competition-info {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }

        .competition-name {
            font-size: 1.1em;
            font-weight: 600;
        }

        .match-count {
            background: #4b5563;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            color: #d1d5db;
        }

        .competition-priority {
            background: #4b5563;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            font-weight: 500;
            color: #d1d5db;
        }

        /* Daily Statistics */
        .daily-stats {
            background: #f8f9fa;
            padding: 25px 30px;
            border-bottom: 1px solid #ecf0f1;
        }

        .stats-header h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .stat-item {
            text-align: center;
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #3498db;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9em;
            color: #7f8c8d;
            font-weight: 500;
        }

        .time-slots h4 {
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .time-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 15px;
        }

        .time-slot {
            background: white;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .time-label {
            display: block;
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .time-count {
            font-size: 1.5em;
            font-weight: bold;
            color: #27ae60;
        }

        /* Enhanced Featured Cards */
        .importance-score {
            position: absolute;
            top: 15px;
            left: 15px;
            background: #f39c12;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .rivalry-badge {
            background: #e74c3c;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            text-align: center;
            margin: 10px 0;
            font-weight: bold;
        }

        .featured-extras {
            margin-top: 15px;
            padding-top: 10px;
            border-top: 1px solid #ecf0f1;
            display: flex;
            justify-content: space-between;
            font-size: 0.8em;
            color: #7f8c8d;
        }

        .tv-info, .attendance-info {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* Enhanced Match List Items */
        .enhanced-match {
            border-left: 4px solid transparent;
            transition: all 0.3s ease;
        }

        .enhanced-match:hover {
            border-left-color: #3498db;
            background: #f8f9fa;
        }

        .match-badges {
            margin-top: 8px;
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .rivalry-mini, .high-importance, .tv-badge {
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 0.7em;
            font-weight: bold;
        }

        .rivalry-mini {
            background: #e74c3c;
            color: white;
        }

        .high-importance {
            background: #f39c12;
            color: white;
        }

        .tv-badge {
            background: #9b59b6;
            color: white;
        }

        .match-time-info {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 5px;
        }

        .importance-mini {
            background: #ecf0f1;
            color: #2c3e50;
            padding: 2px 6px;
            border-radius: 8px;
            font-size: 0.7em;
            font-weight: bold;
        }

        .source-info {
            margin-top: 10px;
            color: #95a5a6;
            font-style: italic;
        }

        .matches-list {
            padding: 0;
        }

        .match-item {
            padding: 20px 30px;
            border-bottom: 1px solid #ecf0f1;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .match-item:hover {
            background: #f8f9fa;
            transform: translateX(5px);
        }

        .match-item:last-child {
            border-bottom: none;
        }

        .match-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .match-teams {
            font-size: 1.2em;
            font-weight: bold;
            color: #2c3e50;
            flex: 1;
        }

        .match-time {
            background: #e74c3c;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .match-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #7f8c8d;
            font-size: 0.9em;
        }

        .match-venue {
            font-style: italic;
        }

        .match-status {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .status-scheduled {
            background: #3498db;
            color: white;
        }

        .status-live {
            background: #e74c3c;
            color: white;
            animation: pulse 2s infinite;
        }

        .status-finished {
            background: #95a5a6;
            color: white;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        .no-matches {
            text-align: center;
            padding: 80px 30px;
            color: #7f8c8d;
            background: linear-gradient(135deg, #f8f9fa, #ecf0f1);
            border-radius: 15px;
            margin: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .no-matches-icon {
            font-size: 4em;
            margin-bottom: 20px;
            opacity: 0.6;
        }

        .no-matches h2 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 2.2em;
        }

        .no-matches p {
            font-size: 1.1em;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .tracked-competitions {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 8px;
            margin-top: 25px;
            border-left: 4px solid #27ae60;
        }

        .no-stats {
            text-align: center;
            padding: 30px;
            color: #95a5a6;
            font-style: italic;
        }

        .date-notice {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }

        .date-notice.today-only {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
        }

        .notice-content {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .notice-content i {
            font-size: 2.5em;
            opacity: 0.8;
        }

        .notice-text h4 {
            margin: 0 0 8px 0;
            font-size: 1.2em;
            font-weight: 600;
        }

        .notice-text p {
            margin: 0;
            opacity: 0.9;
            font-size: 0.95em;
        }

        .error {
            background: #e74c3c;
            color: white;
            padding: 20px 30px;
            text-align: center;
            font-weight: bold;
        }

        .priority-legend {
            background: #f8f9fa;
            padding: 20px 30px;
            border-bottom: 1px solid #ecf0f1;
        }

        .priority-legend h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .priority-items {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .priority-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #7f8c8d;
            font-size: 0.9em;
        }

        .priority-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .priority-high { background: #ef4444; }
        .priority-medium { background: #f59e0b; }
        .priority-low { background: #10b981; }

        /* SofaScore Widget Styles */
        .sofascore-widgets {
            background: #1e293b;
            border-radius: 8px;
            border: 1px solid #334155;
            margin-bottom: 32px;
            overflow: hidden;
        }

        .sofascore-header {
            background: #374151;
            color: #e2e8f0;
            padding: 20px 24px;
            border-bottom: 1px solid #334155;
        }

        .sofascore-header h3 {
            color: #ffffff;
            font-size: 1.4em;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .sofascore-header p {
            color: #94a3b8;
            font-size: 0.95em;
            margin: 0;
        }

        .widgets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 0;
        }

        .widget-container {
            background: #1e293b;
            padding: 20px;
            border-right: 1px solid #334155;
        }

        .widget-container:last-child {
            border-right: none;
        }

        .widget-title {
            color: #ffffff;
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 16px;
            padding-bottom: 8px;
            border-bottom: 1px solid #334155;
        }

        .sofascore-iframe {
            width: 100%;
            height: 400px;
            border: none;
            border-radius: 6px;
            background: #ffffff;
        }

        /* League Links Grid */
        .sofascore-links-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 16px;
            padding: 24px;
        }

        .sofascore-link {
            background: #0f172a;
            border: 1px solid #334155;
            border-radius: 8px;
            padding: 20px;
            text-decoration: none;
            color: #e2e8f0;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .sofascore-link:hover {
            border-color: #64748b;
            background: #1a202c;
            transform: translateY(-2px);
        }

        .sofascore-link.live {
            border-color: #ef4444;
            box-shadow: 0 0 10px rgba(239, 68, 68, 0.2);
        }

        .link-icon {
            font-size: 2em;
            min-width: 40px;
            text-align: center;
        }

        .link-content {
            flex: 1;
        }

        .link-content h4 {
            color: #ffffff;
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .link-content p {
            color: #94a3b8;
            font-size: 0.9em;
            margin: 0;
        }

        .link-arrow {
            font-size: 1.2em;
            color: #64748b;
            transition: transform 0.2s ease;
        }

        .sofascore-link:hover .link-arrow {
            transform: translateX(4px);
        }

        .sofascore-footer {
            background: #374151;
            padding: 16px 24px;
            border-top: 1px solid #334155;
            text-align: center;
        }

        .sofascore-footer p {
            color: #94a3b8;
            font-size: 0.9em;
            margin: 0;
        }

        .sofascore-footer strong {
            color: #ffffff;
        }

        @media (max-width: 768px) {
            .widgets-grid {
                grid-template-columns: 1fr;
            }
            
            .widget-container {
                border-right: none;
                border-bottom: 1px solid #334155;
            }
            
            .widget-container:last-child {
                border-bottom: none;
            }
            
            .sofascore-iframe {
                height: 350px;
            }

            .sofascore-links-grid {
                grid-template-columns: 1fr;
                gap: 12px;
                padding: 20px;
            }

            .sofascore-link {
                padding: 16px;
            }

            .link-icon {
                font-size: 1.8em;
                min-width: 35px;
            }

            .link-content h4 {
                font-size: 1em;
            }

            .link-content p {
                font-size: 0.85em;
            }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-container {
                flex-direction: column;
                gap: 15px;
            }

            .app-title {
                font-size: 2em;
                text-align: center;
            }

            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }

            .page-header {
                padding: 20px;
            }

            .page-header h1 {
                font-size: 2em;
            }

            .featured-section {
                padding: 20px;
            }

            .featured-header h2 {
                font-size: 1.8em;
            }

            .featured-matches-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .featured-match-card {
                padding: 20px;
            }

            .featured-rank {
                width: 30px;
                height: 30px;
                font-size: 1em;
            }

            .team-name {
                font-size: 1.1em;
            }

            .featured-score {
                font-size: 1.5em;
            }

            .competition-header {
                padding: 15px 20px;
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .competition-info {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }

            .competition-name {
                font-size: 1.1em;
            }

            .match-item {
                padding: 15px 20px;
            }

            .match-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .match-details {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }

            .priority-items {
                justify-content: center;
            }

            .all-matches-header {
                padding: 20px;
            }

            .all-matches-header h2 {
                font-size: 1.6em;
            }
        }

        @media (max-width: 480px) {
            .featured-section {
                padding: 15px;
            }

            .featured-header h2 {
                font-size: 1.6em;
            }

            .featured-header p {
                font-size: 1em;
            }

            .featured-matches-grid {
                gap: 12px;
            }

            .featured-match-card {
                padding: 15px;
            }

            .team-name {
                font-size: 1em;
            }

            .featured-time {
                font-size: 1em;
            }

            .all-matches-header h2 {
                font-size: 1.4em;
            }

            .competition-name {
                font-size: 1em;
            }

            .sofascore-links-grid {
                padding: 16px;
            }

            .sofascore-link {
                padding: 12px;
                gap: 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation Header -->
    <header class="app-header">
        <div class="nav-container">
            <h1 class="app-title">SOCCER SCANNER</h1>
            <nav class="nav-links">
                <a href="/" class="nav-link">Team Analysis</a>
                <a href="/matches-today" class="nav-link active">Upcoming Matches</a>
                <a href="/league-tables" class="nav-link">League Tables</a>
            </nav>
        </div>
    </header>

    <div class="container">
        <div class="page-header">
                    <h1 id="page-title">Upcoming Matches</h1>
            <p>Live matches and upcoming games ranked by popularity and importance</p>
            <div class="date-indicator" id="current-date"></div>
        </div>

        <div id="loading" class="loading">
            <div class="spinner"></div>
            <h2>Loading Matches...</h2>
            <p>Fetching upcoming matches from top competitions</p>
        </div>

        <div id="matches-container" class="matches-container" style="display: none;">
            <div class="priority-legend">
                <h3>Match Priority Guide</h3>
                <div class="priority-items">
                    <div class="priority-item">
                        <div class="priority-dot priority-high"></div>
                        <span>High Priority (Top Leagues & Big Clubs)</span>
                    </div>
                    <div class="priority-item">
                        <div class="priority-dot priority-medium"></div>
                        <span>Medium Priority (Major Competitions)</span>
                    </div>
                    <div class="priority-item">
                        <div class="priority-dot priority-low"></div>
                        <span>Lower Priority (Other Matches)</span>
                    </div>
                </div>
            </div>
            
            <div id="daily-stats" class="daily-stats" style="display: none;">
                <!-- Daily statistics will be populated here -->
            </div>
            
            <div id="matches-content"></div>
        </div>

        <!-- League Links -->
        <div class="sofascore-widgets">
            <div class="sofascore-header">
                <h3><img src="https://www.sofascore.com/static/images/sofascore-logo.svg" alt="SofaScore" style="height:24px;vertical-align:middle;margin-right:8px;"> SofaScore Hotlinks</h3>
                <p>Quick access to top European leagues and competitions</p>
            </div>
            <div class="sofascore-links-grid">
                <a href="https://www.sofascore.com/football/livescore" target="_blank" class="sofascore-link live">
                    <div class="link-icon">🔴</div>
                    <div class="link-content">
                        <h4>Live Matches</h4>
                        <p>Real-time scores and live commentary</p>
                    </div>
                    <div class="link-arrow">→</div>
                </a>
                <a href="https://www.sofascore.com/football" target="_blank" class="sofascore-link">
                    <div class="link-icon">📅</div>
                    <div class="link-content">
                        <h4>Today's Fixtures</h4>
                        <p>All scheduled matches for today</p>
                    </div>
                    <div class="link-arrow">→</div>
                </a>
                <a href="https://www.sofascore.com/tournament/football/england/premier-league/17" target="_blank" class="sofascore-link">
                    <div class="link-icon"><img src="https://api.sofascore.app/api/v1/unique-tournament/17/image" alt="Premier League" style="height:32px;width:32px;border-radius:4px;"></div>
                    <div class="link-content">
                        <h4>Premier League</h4>
                        <p>Standings, fixtures & results</p>
                    </div>
                    <div class="link-arrow">→</div>
                </a>
            </div>
            <div class="sofascore-footer">
                <p>📱 <strong>Powered by SofaScore</strong> - Click any section above for detailed live scores, match statistics, and real-time updates</p>
            </div>
        </div>
    </div>

    <script>
        // Set current date
        document.getElementById('current-date').textContent = 
            new Date().toLocaleDateString('en-US', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });

        // Competition priority ranking (higher number = higher priority) - Top 20 Competitions
        const competitionPriorities = {
            // Tier 1: Elite Global Competitions (90-100)
            'Premier League': 100,
            'UEFA Champions League': 95,
            'La Liga': 90,
            
            // Tier 2: Major European Leagues (80-89)
            'Bundesliga': 85,
            'Serie A': 85,
            'Ligue 1': 80,
            
            // Tier 3: European Competitions (70-79)
            'UEFA Europa League': 75,
            'UEFA Conference League': 70,
            'Copa del Rey': 70,
            'FA Cup': 70,
            'DFB-Pokal': 65,
            'Coppa Italia': 65,
            
            // Tier 4: Secondary European Leagues (60-69)
            'Eredivisie': 68,
            'Primeira Liga': 65,
            'Pro League': 62,                    // Belgium
            'Süper Lig': 60,                    // Turkey
            'Austrian Bundesliga': 58,
            'Scottish Premiership': 55,
            
            // Tier 5: Second Divisions (50-59)
            'Championship': 58,                  // England Championship
            'Segunda División': 55,             // Spain Segunda
            '2. Bundesliga': 56,                // Germany 2. Bundesliga
            'Serie B': 54,                      // Italy Serie B
            
            // Tier 6: Americas & International (40-59)
            'Brasileirão': 65,                  // Brazil Serie A
            'Liga Profesional': 60,            // Argentina
            'FIFA World Cup': 100,
            'UEFA European Championship': 95,
            'Copa America': 85,
            'UEFA Nations League': 70,
            'Copa Libertadores': 75,
            'MLS': 50,
            'Liga MX': 52,
            'J1 League': 45,                    // Japan
            'K League 1': 40,                   // South Korea
        };

        function getPriority(competitionName) {
            return competitionPriorities[competitionName] || 30;
        }

        function getPriorityClass(priority) {
            if (priority >= 80) return 'priority-high';
            if (priority >= 60) return 'priority-medium';
            return 'priority-low';
        }

        function getPriorityLabel(priority) {
            if (priority >= 80) return 'High Priority';
            if (priority >= 60) return 'Medium Priority';
            return 'Lower Priority';
        }

        async function loadTodaysMatches() {
            try {
                const response = await fetch('/api/matches-today');
                const data = await response.json();

                if (!response.ok) {
                    throw new Error(data.error || 'Failed to load matches');
                }

                displayMatches(data);
            } catch (error) {
                console.error('Error loading matches:', error);
                showError(error.message);
            }
        }

        function displayMatches(data) {
            const loadingDiv = document.getElementById('loading');
            const containerDiv = document.getElementById('matches-container');
            const contentDiv = document.getElementById('matches-content');
            const statsDiv = document.getElementById('daily-stats');

            loadingDiv.style.display = 'none';
            containerDiv.style.display = 'block';

            if (!data.matches || data.matches.length === 0) {
                contentDiv.innerHTML = `
                    <div class="no-matches">
                        <div class="no-matches-icon"></div>
                        <h2>No Matches Today</h2>
                        <p>There are no scheduled matches for today (${new Date().toLocaleDateString('en-US', { 
                            weekday: 'long', 
                            month: 'long', 
                            day: 'numeric' 
                        })}) in the tracked competitions.</p>
                        <p>Check back tomorrow for upcoming fixtures!</p>
                        <div class="tracked-competitions">
                            <small>Tracking: Premier League, La Liga, Bundesliga, Serie A, Ligue 1, Champions League, Europa League, Conference League, Eredivisie, Primeira Liga, Pro League, Austrian Bundesliga, Süper Lig, Scottish Premiership, Championship, Segunda División, 2. Bundesliga, Serie B, Brasileirão, Liga Profesional</small>
                        </div>
                    </div>
                `;
                statsDiv.innerHTML = `
                    <div class="stats-header">
                        <h3>Today's Overview</h3>
                    </div>
                    <div class="no-stats">
                        <p>No match statistics available for today</p>
                    </div>
                `;
                statsDiv.style.display = 'block';
                return;
            }

            // Since we're now only showing today's matches, update the date logic
            const today = new Date().toISOString().split('T')[0];
            const hasTodayMatches = data.matches.some(match => {
                const matchDate = new Date(match.utcDate || match.date).toISOString().split('T')[0];
                return matchDate === today;
            });

            // Display daily statistics if available
            if (data.match_statistics) {
                displayDailyStatistics(data.match_statistics, data.source_stats);
                statsDiv.style.display = 'block';
            }

            let html = '';

            // Add notice about showing only today's matches
            html += `
                <div class="date-notice today-only">
                    <div class="notice-content">
                        <i class="calendar-icon"></i>
                        <div class="notice-text">
                            <h4>Today's Matches Only</h4>
                            <p>Showing matches scheduled for ${new Date().toLocaleDateString('en-US', { 
                                weekday: 'long', 
                                month: 'long', 
                                day: 'numeric', 
                                year: 'numeric' 
                            })}</p>
                        </div>
                    </div>
                </div>
            `;

            // Featured Matches Section (Top 6)
            if (data.featured_matches && data.featured_matches.length > 0) {
                let featuredTitle = 'Featured Matches';
                let featuredSubtitle = '';
                
                html += `
                    <div class="featured-section">
                        <h2>${featuredTitle}</h2>
                        ${featuredSubtitle}
                        <div class="featured-grid">
                            ${data.featured_matches.map((match, index) => createFeaturedMatchCard(match, index + 1)).join('')}
                        </div>
                    </div>
                `;
            }



            // All Matches Section
            html += `
                <div class="all-matches-section">
                    <div class="section-header all-matches-header">
                        <h2>All Upcoming Matches</h2>
                        <p>All ${data.total_matches} upcoming matches</p>
                        ${data.source_stats ? `
                        <div class="source-info">
                            <small>Sources: ESPN API primary, Football-data.org fallback</small>
                        </div>
                        ` : ''}
                    </div>
            `;

            // Group matches by competition and sort by priority
            const matchesByCompetition = {};
            
            data.matches.forEach(match => {
                const competition = match.competition.name;
                if (!matchesByCompetition[competition]) {
                    matchesByCompetition[competition] = {
                        matches: [],
                        priority: getEnhancedPriority(competition, match),
                        competition: match.competition
                    };
                }
                matchesByCompetition[competition].matches.push(match);
            });

            // Sort competitions by priority (highest first)
            const sortedCompetitions = Object.entries(matchesByCompetition)
                .sort(([,a], [,b]) => b.priority - a.priority);

            sortedCompetitions.forEach(([competitionName, competitionData]) => {
                const priorityClass = getPriorityClass(competitionData.priority);
                const priorityLabel = getPriorityLabel(competitionData.priority);

                html += `
                    <div class="competition-section">
                        <div class="competition-header">
                            <div class="competition-info">
                                <span class="competition-name">${competitionName}</span>
                                <span class="match-count">${competitionData.matches.length} matches</span>
                            </div>
                            <span class="competition-priority ${priorityClass}">${priorityLabel}</span>
                        </div>
                        <div class="matches-list">
                `;

                // Sort matches within competition by time
                competitionData.matches.sort((a, b) => new Date(a.utcDate) - new Date(b.utcDate));

                competitionData.matches.forEach(match => {
                    html += createEnhancedMatchListItem(match);
                });

                html += `
                        </div>
                    </div>
                `;
            });

            html += `</div>`;
            
            contentDiv.innerHTML = html;
        }

        function displayDailyStatistics(stats, sourceStats) {
            const statsDiv = document.getElementById('daily-stats');
            
            let html = `
                <div class="stats-header">
                    <h3>Today's Match Overview</h3>
                </div>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-number">${stats.total_matches}</div>
                        <div class="stat-label">Total Matches</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">${stats.high_importance}</div>
                        <div class="stat-label">High Priority</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">${stats.live_matches}</div>
                        <div class="stat-label">Live Now</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">${stats.rivalries}</div>
                        <div class="stat-label">Rivalries</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">${stats.major_leagues}</div>
                        <div class="stat-label">Major Leagues</div>
                    </div>
                </div>
            `;
            
            statsDiv.innerHTML = html;
        }

        function getEnhancedPriority(competitionName, match) {
            const baseScore = getPriority(competitionName);
            const enhancedInfo = match.enhanced_info || {};
            const importanceScore = enhancedInfo.importance_score || 0;
            
            // Combine base competition priority with match-specific importance
            return baseScore + (importanceScore * 0.3);
        }

        function createFeaturedMatchCard(match, rank) {
            const matchTime = new Date(match.utcDate);
            const timeString = matchTime.toLocaleTimeString('en-US', { 
                hour: '2-digit', 
                minute: '2-digit',
                hour12: true 
            });

            let status = match.status;
            let statusClass = 'status-scheduled';
            let statusText = 'Scheduled';

            if (status === 'LIVE' || status === 'IN_PLAY') {
                statusClass = 'status-live';
                statusText = '🔴 LIVE';
            } else if (status === 'FINISHED') {
                statusClass = 'status-finished';
                statusText = 'Finished';
            } else if (matchTime < new Date()) {
                statusClass = 'status-finished';
                statusText = 'Finished';
            }

            const homeTeam = match.homeTeam.name;
            const awayTeam = match.awayTeam.name;
            const competition = match.competition.name;
            const venue = match.venue || 'Venue TBD';

            // Enhanced information
            const enhancedInfo = match.enhanced_info || {};
            const importanceScore = enhancedInfo.importance_score || 0;
            const tvCoverage = enhancedInfo.tv_coverage || 'TBD';
            const rivalryFactor = enhancedInfo.rivalry_factor;
            const attendance = enhancedInfo.attendance_estimate || 'TBD';

            // Check if score is available
            let scoreDisplay = '';
            if (match.score && match.score.fullTime && 
                (match.score.fullTime.home !== null || match.score.fullTime.away !== null)) {
                scoreDisplay = `
                    <div class="featured-score">
                        <span class="score-number">${match.score.fullTime.home}</span>
                        <span class="score-separator">-</span>
                        <span class="score-number">${match.score.fullTime.away}</span>
                    </div>
                `;
            }

            const priorityClass = getPriorityClass(importanceScore);
            
            // Check if match is not today
            const today = new Date().toISOString().split('T')[0];
            const matchDate = new Date(match.utcDate).toISOString().split('T')[0];
            const isToday = matchDate === today;
            
            let dateDisplay = '';
            if (!isToday) {
                const matchDateObj = new Date(match.utcDate);
                const dateString = matchDateObj.toLocaleDateString('en-US', { 
                    weekday: 'short', 
                    month: 'short', 
                    day: 'numeric' 
                });
                const daysFromToday = enhancedInfo.days_from_today || 0;
                let dayLabel = '';
                if (daysFromToday < 0) {
                    dayLabel = `${Math.abs(daysFromToday)} day${Math.abs(daysFromToday) !== 1 ? 's' : ''} ago`;
                } else if (daysFromToday > 0) {
                    dayLabel = `in ${daysFromToday} day${daysFromToday !== 1 ? 's' : ''}`;
                }
                
                dateDisplay = `<div class="match-date-info">📅 ${dateString} ${dayLabel ? `(${dayLabel})` : ''}</div>`;
            }

            return `
                <div class="featured-match-card ${priorityClass}">
                    <div class="featured-rank">#${rank}</div>
                    <div class="importance-score">★ ${importanceScore}</div>
                    <div class="featured-competition">${competition}</div>
                    ${dateDisplay}
                    ${rivalryFactor ? `<div class="rivalry-badge">⚔️ ${rivalryFactor}</div>` : ''}
                    <div class="featured-teams">
                        <div class="team-name home-team">${homeTeam}</div>
                        ${scoreDisplay}
                        <div class="vs-text">vs</div>
                        <div class="team-name away-team">${awayTeam}</div>
                    </div>
                    <div class="featured-details">
                        <div class="featured-time">${timeString}</div>
                        <div class="featured-status ${statusClass}">${statusText}</div>
                    </div>
                    <div class="featured-venue">${venue}</div>
                    <div class="featured-extras">
                        <div class="tv-info">${tvCoverage}</div>
                        <div class="attendance-info">${attendance}</div>
                    </div>
                </div>
            `;
        }

        function createEnhancedMatchListItem(match) {
            const matchTime = new Date(match.utcDate);
            const now = new Date();
            const timeString = matchTime.toLocaleTimeString('en-US', { 
                hour: '2-digit', 
                minute: '2-digit',
                hour12: true 
            });

            let status = match.status;
            let statusClass = 'status-scheduled';
            let statusText = 'Scheduled';

            if (status === 'LIVE' || status === 'IN_PLAY') {
                statusClass = 'status-live';
                statusText = '🔴 LIVE';
            } else if (status === 'FINISHED') {
                statusClass = 'status-finished';
                statusText = 'Finished';
            } else if (matchTime < now) {
                statusClass = 'status-finished';
                statusText = 'Finished';
            }

            const homeTeam = match.homeTeam.name;
            const awayTeam = match.awayTeam.name;
            const venue = match.venue || 'Venue TBD';

            // Enhanced information
            const enhancedInfo = match.enhanced_info || {};
            const importanceScore = enhancedInfo.importance_score || 0;
            const rivalryFactor = enhancedInfo.rivalry_factor;
            const tvCoverage = enhancedInfo.tv_coverage || '';

            // Check if score is available
            let scoreDisplay = '';
            if (match.score && match.score.fullTime && 
                (match.score.fullTime.home !== null || match.score.fullTime.away !== null)) {
                scoreDisplay = ` (${match.score.fullTime.home} - ${match.score.fullTime.away})`;
            }

            let enhancedBadges = '';
            if (rivalryFactor) {
                enhancedBadges += `<span class="rivalry-mini">⚔️ ${rivalryFactor}</span>`;
            }
            if (importanceScore >= 70) {
                enhancedBadges += `<span class="high-importance">High Priority</span>`;
            }
            if (tvCoverage && tvCoverage !== 'TBD') {
                enhancedBadges += `<span class="tv-badge">${tvCoverage}</span>`;
            }

            return `
                <div class="match-item enhanced-match">
                    <div class="match-header">
                        <div class="match-teams">
                            ${homeTeam} vs ${awayTeam}${scoreDisplay}
                            ${enhancedBadges ? `<div class="match-badges">${enhancedBadges}</div>` : ''}
                        </div>
                        <div class="match-time-info">
                            <div class="match-time">${timeString}</div>
                            <div class="importance-mini">★${importanceScore}</div>
                        </div>
                    </div>
                    <div class="match-details">
                        <div class="match-venue">${venue}</div>
                        <div class="match-status ${statusClass}">${statusText}</div>
                    </div>
                </div>
            `;
        }

        function showError(message) {
            const loadingDiv = document.getElementById('loading');
            const containerDiv = document.getElementById('matches-container');
            
            loadingDiv.style.display = 'none';
            containerDiv.style.display = 'block';
            containerDiv.innerHTML = `
                <div class="error">
                    <strong>Error:</strong> ${message}
                </div>
            `;
        }

        // Load matches when page loads
        document.addEventListener('DOMContentLoaded', loadTodaysMatches);

        // Refresh matches every 5 minutes
        setInterval(loadTodaysMatches, 5 * 60 * 1000);
    </script>
    
</body>
</html>
